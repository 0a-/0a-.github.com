<!DOCTYPE html>
<html>
<head>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>JavaScript Closure and Design Patterns in 3 minutes</title>
  <meta property="og:url"                content="http://0a.io/JavaScript-closure-and-design-patterns" />
  
  <meta property="og:type"               content="article" />
  
  <meta property="og:title"              content="JavaScript Closure and Design Patterns in 3 minutes" />
  <meta property="og:description"        content="JavaScript closure and design patterns explained in possibly the most comprehensible way possible." />
  <meta property="og:image"              content="/assets/img/img2.jpg" />
  <meta name="keywords" content="0a, Archy, explains">
  <meta name="description" content="JavaScript closure and design patterns explained in possibly the most comprehensible way possible.">
  
  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  
  <link href='http://fonts.googleapis.com/css?family=Yellowtail' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://0a.io/JavaScript-closure-and-design-patterns">
  <link rel="alternate" type="application/rss+xml" title="0a: a thunk, a propositional variable, a \n" href="http://0a.io/feed.xml" />
  <script src="/assets/js/core.js"></script>
   
    
</head>


<body class="notHomePage  ">

<header class="archyhead_wrap">
  <div class="archyhead">
    <div class="page_meta_info_wrapper">
      <div class="page_meta_info">
          
         <div class="central block0a">
    <div class="inline headerDOM">
  <a class="_0a" href="/">
    <div class="logo">
      <span>0a</span>
      <img src="/assets/img/0a.png" alt="0a">
    </div>
  </a>
  <div class="views_choices">
       <div class="nav_choices">
       <a href="/about" class="opacity_hover about_trigger"><div class="nav_choice"><span>About</span></div></a>
      

     
       <a href="/dailylogs" class="opacity_hover"><div class="nav_choice"><i class="fa fa-key fa-lg"></i> </div></a>
     
     
      <a href="/feed.xml" class="opacity_hover" target="_blank"><div class="nav_choice"><span><i class="fa fa-rss fa-lg"></i> </span></div></a>
    </div>
  </div>
</div>
</div>

        <div class="arrow inline hideInMobile">
          <img src="/assets/img/arrow.png">
        </div>
        <div class="current_region inline hideInMobile">
          <a href= " /minutes/ "><span>A in<br>x Minutes</span></a>

        </div>
        
        
        <div class="arrow inline hideInMobile">
          <img src="/assets/img/arrow.png">
        </div>
        <div class="archyitem inline hideInMobile">
          <a class="forward_to_post thumbnail"><img class="article_meta_cover_picture" src=" /assets/img/img2.jpg " alt="">

          </a>
          <div class="archytitle garamond"><a class="forward_to_post">JavaScript Closure and Design Patterns in 3 minutes</a></div>
        </div>
        
        
      </div>
    </div>
     
  </div>
</header>

<article itemscope itemtype="http://schema.org/Article">
<div class="archywrap">
<div class="container">
<div class="archypost garamond postTitle">


<div class="archysub"></div>

<h1><span>

JavaScript Closure and Design Patterns in 3 minutes

</span></h1>
<span class="hiding"> by <span itemprop="author">Archy</span> </span>
<p class="belowtitle"><i class="fa fa-dot-circle-o fa-lg"></i> <time itemprop="datePublished">

Sep 17, 2014

</time>

<!-- <span class="margin-left-11px">

<a href=" https://www.facebook.com/sharer/sharer.php?u=http://0a.io/JavaScript-closure-and-design-patterns "  onclick="window.open(' https://www.facebook.com/sharer/sharer.php?u=http://0a.io/JavaScript-closure-and-design-patterns ', 'newwindow', 'width=400, height=350'); return false;">
<i class="fa fa-facebook fa-lg smaller"></i>
</a>

<a href=" https://twitter.com/intent/tweet?text=JavaScript Closure and Design Patterns in 3 minutes&url=http://0a.io/JavaScript-closure-and-design-patterns"  onclick="window.open(' https://twitter.com/intent/tweet?text=JavaScript Closure and Design Patterns in 3 minutes&url=http://0a.io/JavaScript-closure-and-design-patterns', 'newwindow', 'width=400, height=350'); return false;"><i class="fa fa-twitter fa-lg smaller"></i></a>
</span> --></p>
</div>

</div>
</div>

<div class="container" id="articleContainer">
<div class="archypost wordsToRead  lato ">
<div class="archycoverpic showInMobile">
        <img src=" /assets/img/img2.jpg " alt="">
      </div>
<div class="archycontent articleBody" itemprop="articleBody"><h3 id="st-minute-what-is-a-closure-in-javascript">1st Minute: What is a closure in Javascript?</h3>

<p>A <i>closure</i> is not really <a target="_blank" class="default_anchor" href="http://0ar.ch/">a</a> thing. It is just a term we use to describe what happens when we have a function that has access to outside variables other functions cannot access.</p>

<blockquote>Outside variables are sometimes referred to as <a target="_blank" href="http://en.wikipedia.org/wiki/Non-local_variable">non-local variable.</a></blockquote>

<p>Here is a simple example of closure in JavaScipt.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">cat</span><span class="p">(){</span>

    <span class="kd">var</span> <span class="nx">nyan</span> <span class="o">=</span> <span class="s2">"meow"</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">speak</span><span class="p">(){</span>

        <span class="nx">alert</span><span class="p">(</span><span class="nx">nyan</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="nx">speak</span><span class="p">();</span>

<span class="p">}</span></code></pre></figure>

<p>Now everytime you do <code>cat()</code>, a new variable, <code>nyan</code>, would be created. And <code>nyan</code> is only accessible by the <code>speak</code> function inside <code>cat</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">cat</span><span class="p">();</span> <span class="c1">//alerts "meow" because speak() is invoked</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">nyan</span><span class="p">);</span> <span class="c1">//error: nyan is undefined</span></code></pre></figure>

<p>Here is another example of closure.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">cat</span><span class="p">(){</span>

    <span class="kd">var</span> <span class="nx">nyan</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"meow"</span><span class="p">,</span><span class="s2">"I am a cat"</span><span class="p">];</span>

    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">speak_and_change_x</span> <span class="o">=</span>  <span class="kd">function</span><span class="p">(){</span>
        <span class="c1">//alert either "meow" or "I am a cat"</span>
        <span class="c1">//based on x</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">nyan</span><span class="p">[</span><span class="nx">x</span><span class="p">]);</span>

        <span class="c1">//change x</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="mi">1</span><span class="o">===</span><span class="mi">2</span><span class="p">)?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nx">speak_and_change_x</span> <span class="p">;</span>

<span class="p">}</span></code></pre></figure>

<p>Now when you invoke <code>cat</code>, 3 variables will be created: an array <code>nyan</code>, an integer <code>x</code>, and a function <code>speak_and_change_x</code>. Both <code>nyan</code> and <code>x</code> can only be accessed by function <code>speak_and_change_x</code> inside <code>cat</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">cat</span><span class="p">();</span> <span class="c1">//nothing will be alerted.</span>

<span class="nx">cat</span><span class="p">()();</span> <span class="c1">//alert "meow";</span></code></pre></figure>

<p>Since you are just returning <code>speak_and_change_x</code>, rather than invoking it using <code>()</code>, nothing will be alerted when you write <code>cat()</code>. However, writing <code>cat()()</code> will <code>alert ("meow")</code> because it is equivalent to invoking the function <code>cat</code> returns  - and that is the same as <code>speak_and_change_x()</code>.</p>

<p>Rather than writing <code>cat()()</code> to invoke the function, normally what we do is to store what <code>cat()</code> returns into a variable.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Archy</span> <span class="o">=</span> <span class="nx">cat</span><span class="p">();</span> <span class="c1">//since cat() returns speak_and_change_x, Archy is now speak_and_change_x;</span>

<span class="c1">//now invoking Archy() will be the same as invoking speak_and_change_x()</span>

<span class="nx">Archy</span><span class="p">();</span> <span class="c1">//alerts "meow"</span>

<span class="nx">Archy</span><span class="p">();</span> <span class="c1">//alerts "I am a cat"</span>

<span class="nx">Archy</span><span class="p">();</span> <span class="c1">//alerts "meow"</span>

<span class="nx">Archy</span><span class="p">();</span> <span class="c1">//alerts "I am a cat"</span></code></pre></figure>

<blockquote>
  <p>Note: when returning a function, you shouldn’t put <code>()</code> behind it. The moment you put <code>()</code> behind a function, you are invoking/invoking it.</p>

</blockquote>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span> <span class="k">return</span> <span class="mi">6</span> <span class="p">};</span>
<span class="err"> </span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">();</span> <span class="c1">//b is 6.</span>
<span class="err"> </span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span> <span class="c1">//6 will be alerted;</span>
<span class="err"> </span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">b</span><span class="p">());</span> <span class="c1">//error: b is not a function</span>
<span class="err"> </span>
<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span> <span class="c1">//c is a function</span>
<span class="err"> </span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span> <span class="c1">//the entire function will be alerted</span>
<span class="err"> </span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">c</span><span class="p">());</span> <span class="c1">//alert 6.</span></code></pre></figure>

<blockquote>

  <p><a target="_blank" onclick="var c = function (){ return 6 }; alert(c)">Click here</a> if you are curious what invoking <code>alert(c)</code> will do in the code above.</p>
</blockquote>

<p class="text-center"> ● ● ● </p>

<h3>Bonus: Ternary Operator</h3>
<p>In the example above you can see that I am doing something like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="mi">1</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span></code></pre></figure>

<p>This is a short way of writing</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">(</span> <span class="nx">x</span><span class="o">+</span><span class="mi">1</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">){</span>
    <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>The way it works can be visualized in this form:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)?</span> <span class="k">if</span> <span class="kc">true</span> <span class="p">:</span> <span class="k">if</span> <span class="kc">false</span><span class="p">;</span></code></pre></figure>

<h3>Bonus: Strict Comparison Operators (<code>===</code> and <code>!==</code>)</h3>

<p>The <code>===</code> in the code above is known as a Strict Comparison Operator. It is slightly different from <code>==</code>. When we compare two variables like this: <code>a === b</code>, the JavaScript engine will first look at the variables’ <i>types</i>, and if they are not the same <i>type</i>, <code>false</code> will be returned immediately.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="c1">//false;</span>

<span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="s2">"0"</span><span class="p">)</span> <span class="c1">//false;</span>

<span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="p">[])</span> <span class="c1">//false;</span>

<span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//true;</span></code></pre></figure>

<p>If we compare two variables using <code>==</code>, a type conversion would happen before the comparison occurs.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="c1">//true; because JS engine has converted null into integer 0</span>

<span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="s2">"0"</span><span class="p">)</span> <span class="c1">//true; because JS engine has converted the string "0" into integer 0</span>

<span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">[])</span> <span class="c1">//true; because JS engine has converted the empty array [] into integer 0</span>

<span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//true;</span></code></pre></figure>

<p>Therefore, in terms of performance, <code>===</code> would be slightly faster. The other strict comparison operator is <code>!==</code>, which is simply the inverse of <code>===</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="mi">0</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//false;</span>

<span class="p">(</span><span class="mi">0</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="c1">//true;</span></code></pre></figure>

<p class="text-center"> ● ● ● </p>

<h3>2st Minute: More on Closure in JavaScript</h3>

<p>When you create a closure, instead of returning a function, you can return an object. Here is another example of closure.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Archy</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">nyan</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"meow"</span><span class="p">,</span><span class="s2">"I am a cat"</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span>  <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">nyan</span><span class="p">[</span><span class="nx">x</span><span class="p">]);</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="mi">1</span><span class="o">===</span><span class="mi">2</span><span class="p">)?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">speak</span><span class="p">:</span> <span class="nx">a</span><span class="p">,</span>
        <span class="na">transform</span><span class="p">:</span> <span class="nx">b</span><span class="p">,</span>
        <span class="na">name</span><span class="p">:</span> <span class="s2">"Archy"</span>
    <span class="p">}</span>
<span class="p">})();</span></code></pre></figure>

<p>In the example above, by returning an object, you will be able to return 2 functions that can access <code>nyan</code> and <code>x</code>, which other functions has no access to.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">alert</span><span class="p">(</span><span class="nx">nyan</span><span class="p">[</span><span class="nx">x</span><span class="p">]);</span> <span class="c1">//nyan is undefined, x is undefined.</span>

<span class="nx">Archy</span><span class="p">.</span><span class="nx">speak</span><span class="p">()</span> <span class="c1">//alerts "meow"</span>

<span class="nx">Archy</span><span class="p">.</span><span class="nx">speak</span><span class="p">()</span> <span class="c1">//alerts "meow"</span>

<span class="nx">Archy</span><span class="p">.</span><span class="nx">transform</span><span class="p">()</span> <span class="c1">//this changes the value of x that Archy.speak() has access to.</span>

<span class="nx">Archy</span><span class="p">.</span><span class="nx">speak</span><span class="p">()</span> <span class="c1">//alerts "I am a cat", because x has been changed to 1.</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">Archy</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">//alerts "Archy"</span></code></pre></figure>

<p>Functions in the form <code>function(){...}</code> is known as anonymous function. One cool thing in JavaScript is that functions are actually not required to have names.</p>

<p>By having a function like this <code>(function(){...})()</code> (enclosing it with brackets and putting another pair of brackets behind), we are basically invoking this anonymous function. The <code>()</code> behind can also be used to pass parameters into the function, just like what can be done using <code>()</code> behind a function name like this <code>alert("nyan")</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">"x"</span><span class="p">)</span> <span class="p">})();</span> <span class="c1">//alert "x"</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span> <span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">})(</span><span class="s2">"x"</span><span class="p">);</span> <span class="c1">//alert "x"</span></code></pre></figure>

<p>One common practice in Java script is to pass commonly used variables into anonymous function as parameters for quicker access. By passing a variable into a function, you would be able to access it locally instead of globally when you are inside the function, and thus it would be relatively faster.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">);</span> <span class="p">})();</span> <span class="c1">//accessing global variable.</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nb">window</span><span class="p">){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">);</span> <span class="p">})(</span><span class="nb">window</span><span class="p">);</span> <span class="c1">//accessing local variable.</span></code></pre></figure>

<blockquote>
  <p>When you surround <i>statements</i> (e.g. a function statement: <code>function hi(){}</code>) in brackets (i.e. you have <code class="highlighter-rouge">(function hi(){})</code>), you are turning them into <i>expressions</i> (in this case it’s known as <a target="_blank" href="http://en.wikipedia.org/wiki/Immediately-invoked_function_expression">immediately-invoked function expression (IIFE)</a>) and you can do all sort of things with expressions, similar to how you can do all sorts of things with variables.</p>

</blockquote>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//d has a boolean value of false.</span>
<span class="err"> </span>
<span class="nx">d</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">//d has been converted into a string.</span>
<span class="err"> </span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span> <span class="c1">//alerts "false"</span>
<span class="err"> </span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">//(1&lt; 0) is being interpreted as an expression.</span>
<span class="err"> </span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">//alerts "false";</span>
<span class="err"> </span>
<span class="p">(</span><span class="kd">function</span> <span class="nx">hi</span><span class="p">(){</span><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">)}).</span><span class="nx">call</span><span class="p">();</span> <span class="c1">//alerts "false";</span>
<span class="err"> </span>
<span class="p">(</span><span class="kd">function</span> <span class="nx">hi</span><span class="p">(){</span><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">)})();</span> <span class="c1">//alerts "false";</span>
<span class="err"> </span>
<span class="kd">function</span> <span class="nx">hi</span><span class="p">(){</span><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">)}.</span><span class="nx">call</span><span class="p">();</span> <span class="c1">//syntax error</span>
<span class="err"> </span>
<span class="kd">function</span> <span class="nx">hi</span><span class="p">(){</span><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">)}();</span> <span class="c1">//syntax error</span></code></pre></figure>

<h3>3rd Minute: Design patterns in JavaScript</h3>

<p>The example above where we create a closure and return an object is an example of a design pattern in JavaScript known as The Module Pattern.</p>

<p>There are many design patterns in JavaScript. Different design patterns are just different ways of writing codes. The Module Pattern, for example, uses <a target="_blank" href="http://0ar.ch/0a-explains-javascript-closure-and-design-patterns">closure</a> to create the illusion of a class object (or a class instance), something that JavaScript doesn’t really provide (since JavaScript implements <a target="_blank" href="http://en.wikipedia.org/wiki/Prototype-based_programming">prototype-based OO</a>).  Using The Module Pattern, one would be able to have <i>public</i> and <i>private</i> functions and variables in an object (as if it is an instance of a class in <a target="_blank" href="http://en.wikipedia.org/wiki/Class-based_programming">class-based OO</a>).</p>

<blockquote>

In this case, <code>x</code> and <code>nyan</code> are private variables, while <code>name</code> is a public variable and <code>speak()</code> and <code>transform()</code> are public functions. In class-based OO language, when something is public, it simply means that it is globally accessible. When something is private, only the instance and class functions (In this case there isn't a class function) are able to access it.

</blockquote>

<p>Now let’s move on to The Singleton Pattern, another beginner design pattern that makes good use of closure. The Singleton Pattern is like an upgrade version of The Module Pattern. Besides creating an illusion of a class object, it creates an illusion of a class function that either constructs the object (an instance of the class) or returns an already constructed object.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Archy</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

    <span class="kd">function</span> <span class="nx">cat</span> <span class="p">(</span><span class="nx">obj</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">nyan</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nyan</span><span class="p">,</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">speak</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">nyan</span><span class="p">[</span><span class="nx">x</span><span class="p">]);</span>
        <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="mi">1</span><span class="o">===</span><span class="mi">2</span><span class="p">)?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">instance</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">_static</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="s2">"Archy"</span><span class="p">,</span>
        <span class="na">get_cat</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">){</span>
            <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">cat</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"instance already created. nyannannn."</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">instance</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">_static</span><span class="p">;</span>
<span class="p">})();</span>

<span class="kd">var</span> <span class="nx">nyancat</span> <span class="o">=</span> <span class="nx">Archy</span><span class="p">.</span><span class="nx">get_cat</span><span class="p">({</span><span class="na">nyan</span><span class="p">:</span> <span class="p">[</span><span class="s2">"meow"</span><span class="p">,</span><span class="s2">"I am a cat"</span><span class="p">],</span> <span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">});</span> <span class="c1">//it creats an instance</span>
<span class="nx">nyancat</span><span class="p">.</span><span class="nx">speak</span><span class="p">();</span> <span class="c1">//alerts "meow";</span>
<span class="nx">nyancat</span><span class="p">.</span><span class="nx">transform</span><span class="p">();</span>
<span class="nx">nyancat</span><span class="p">.</span><span class="nx">speak</span><span class="p">();</span> <span class="c1">//alerts "I am a cat";</span>
<span class="kd">var</span> <span class="nx">mycat</span> <span class="o">=</span> <span class="nx">Archy</span><span class="p">.</span><span class="nx">get_cat</span><span class="p">();</span> <span class="c1">//"instance already created. nyannannn."</span>
<span class="nx">mycat</span><span class="p">.</span><span class="nx">speak</span><span class="p">();</span> <span class="c1">//alerts "I am a cat";</span></code></pre></figure>

<p>Basically, in the Singleton Pattern, we restrict instantiation of a class to a single object.</p>

<p>(From the example above:)</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">instance</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">_static</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="s2">"Archy"</span><span class="p">,</span>
        <span class="na">get_cat</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">){</span>
            <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">cat</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"instance already created. nyannannn."</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">instance</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

<p>Here we can see that nothing will happen to the variable <code>instance</code>. And it would be returned if <code>instance</code> is not <code>undefined</code>.</p>

<p>Conclusion: in The Singleton Pattern, the object/instance can only be accessed using the <code>Archy.get_cat()</code> function. So Archy is acting like the agent of the cat. There is no other way to get the cat unless you ask  <a target="_blank" class="default_anchor" href="http://0ar.ch/">Archy</a>. And Archy would create the cat for you the first time you ask for the cat. After that Archy would just keep giving you the same old cat.</p>

<p>Thrrp.</p>

<blockquote>If you'd like to learn more about JavaScript's design patterns, here is <a target="_blank" href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/">a great book written by Addy Osmani</a>.</blockquote>
</div>
<div class="articleFooter">
<div class="kudobox">
<div class="kudos" data-url="0a.io/JavaScript-closure-and-design-patterns"></div>
</div>
<div class="showDisqus display-none">
<a>Show Comments</a>
</div>

</div>
<div id="disqus_thread">
    
</div>
</div>
</div>

  <div class="archywrap">
  <div class="container garamond">
      <div class="archysub subtitleBottom"><p>Painting is Church Street El by <a target="_blank" href="http://en.wikipedia.org/wiki/Charles_Sheeler">Charles Sheeler</a>, 1920.</p></div>
        
        
        
        
        
            


        
            

<div class="archywrap">
<div class="container">
<div class="archy_scroll_view_controller">

<div class="archylist"><h2><span>Read next</span></h2>
  <div class="row showIFFWideScreen">
    <div class="col-sm-4 archyitemdimension">
    
    
    
    <!-- this is for the read more session of a post; such that it doesnt show own link -->
      
      
       <div class="archyitem" itemscope itemtype="http://schema.org/Article">
        <div class="archydate_mobile PTSerif">
          <span itemprop="datePublished">
          Aug 6, 2015
          </span>
        </div>
        <a href="/boolean-satisfiability-problem-or-sat-in-5-minutes/" class="thumbnail"><img src=" /assets/img/untitled-1962.jpg " alt="" itemprop='thumbnailUrl'>
          <div class="vcenter archycover">
            <div class="vcenter archydate">
              <span class="big">
              06
              </span><br>
              Aug 2015
            </div>
          </div>
        </a>
        <div class="archytitle PTSerif">
          <span>
          <a itemprop="name" class="opacity_hover" href="/boolean-satisfiability-problem-or-sat-in-5-minutes/">
            The Boolean Satisfiability Problem [S<small>AT</small>] and S<small>AT</small> solvers in 5 mins* (or&nbsp;more)
          </a><br>
          </span>
        </div>
      </div>

      
    
    
    
    <!-- this is for the read more session of a post; such that it doesnt show own link -->
      
      
    
    
    
    
    </div>
    <div class="col-sm-4 archyitemdimension">
    
    
    
    <!-- this is for the read more session of a post; such that it doesnt show own link -->
      
      
    
    
    
    <!-- this is for the read more session of a post; such that it doesnt show own link -->
      
      
       <div class="archyitem" itemscope itemtype="http://schema.org/Article">
        <div class="archydate_mobile PTSerif">
          <span itemprop="datePublished">
          Jun 8, 2015
          </span>
        </div>
        <a href="/Jekyll-in-3min-for-your-GitHub-page" class="thumbnail"><img src=" /assets/img/capri-battery.jpg " alt="" itemprop='thumbnailUrl'>
          <div class="vcenter archycover">
            <div class="vcenter archydate">
              <span class="big">
              08
              </span><br>
              Jun 2015
            </div>
          </div>
        </a>
        <div class="archytitle PTSerif">
          <span>
          <a itemprop="name" class="opacity_hover" href="/Jekyll-in-3min-for-your-GitHub-page">
            Jekyll in 3 minutes - a quick tour for those who plan to make a customized Github Page
          </a><br>
          </span>
        </div>
      </div>

      
    
    
    
    
    </div>
    <div class="col-sm-4 archyitemdimension">
    
    
    
    <!-- this is for the read more session of a post; such that it doesnt show own link -->
      
      
    
    
    
    <!-- this is for the read more session of a post; such that it doesnt show own link -->
      
      
    
    
    
    
    </div>
</div>
<div class="row showIFFNotWideScreen">


<!-- this is for the read more session of a post; such that it doesnt show own link -->
      <div class="col-sm-4 archyitemdimension">
       <div class="archyitem" itemscope itemtype="http://schema.org/Article">
        <div class="archydate_mobile PTSerif">
          <span itemprop="datePublished">
          Aug 6, 2015
          </span>
        </div>
        <a href="/boolean-satisfiability-problem-or-sat-in-5-minutes/" class="thumbnail"><img src=" /assets/img/untitled-1962.jpg " alt="" itemprop='thumbnailUrl'>
          <div class="vcenter archycover">
            <div class="vcenter archydate">
              <span class="big">
              06
              </span><br>
              Aug 2015
            </div>
          </div>
        </a>
        <div class="archytitle PTSerif">
          <span>
          <a itemprop="name" class="opacity_hover" href="/boolean-satisfiability-problem-or-sat-in-5-minutes/">
            The Boolean Satisfiability Problem [S<small>AT</small>] and S<small>AT</small> solvers in 5 mins* (or&nbsp;more)
          </a><br>
          </span>
        </div>
      </div>

    </div>



<!-- this is for the read more session of a post; such that it doesnt show own link -->
      <div class="col-sm-4 archyitemdimension">
       <div class="archyitem" itemscope itemtype="http://schema.org/Article">
        <div class="archydate_mobile PTSerif">
          <span itemprop="datePublished">
          Jun 8, 2015
          </span>
        </div>
        <a href="/Jekyll-in-3min-for-your-GitHub-page" class="thumbnail"><img src=" /assets/img/capri-battery.jpg " alt="" itemprop='thumbnailUrl'>
          <div class="vcenter archycover">
            <div class="vcenter archydate">
              <span class="big">
              08
              </span><br>
              Jun 2015
            </div>
          </div>
        </a>
        <div class="archytitle PTSerif">
          <span>
          <a itemprop="name" class="opacity_hover" href="/Jekyll-in-3min-for-your-GitHub-page">
            Jekyll in 3 minutes - a quick tour for those who plan to make a customized Github Page
          </a><br>
          </span>
        </div>
      </div>

    </div>




</div>
</div>

</div>
</div>
</div>


        
            


        
            


        
            


        
  </div>
  </div>

</article>
<script src="/assets/js/kudosplease.js">
</script>
<script src="/assets/js/article.js">
</script>



<footer class="foot">

<div>
<a target="_blank" href="https://github.com/0a-/0a-.github.io"> View source</a></div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54767208-1', 'auto');
  ga('send', 'pageview');

</script>

</body>



</html>
